

从编程的角度，单线程程序的优势无须赘言：简单。程序的结构一般，是一个基于[[IO multiplexing]]的[[event loop]]。或者直接用阻塞IO。

Event loop有一个明显的缺点，它是非抢占的（[[non-preemptive]]）。假设事件a的优先级高于事件b，处理事件a需要1ms，处理事件b需要10ms。如果事件b稍早于a发生，那么当事件a到来时，程序已经离开了poll(2)调用，并开始处理事件b。事件a要等上10ms才有机会被处理，总的响应时间为11ms。这等于发生了[[优先级反转]]。这个缺点可以用多线程来克服，这也是多线程的主要优势。

> 总结： 单线程的 event loop 实现，由于 event loop 是非抢占的，容易发生优先级反转。可以用多线程解决



