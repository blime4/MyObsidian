[[d - 算法/回溯/算法-回溯]]
[[算法-图论]]
[[算法-dfs]]

#### [797. 所有可能的路径](https://leetcode-cn.com/problems/all-paths-from-source-to-target/)

```c++
class Solution{
public:
	vector<vector<int>> ans;
	vector<int> stk;
	void dfs(vector<vector<int>>& graph, int x, int n){
		if(x == n){
			ans.push_back(stk);
			return;
		}
		// 回溯
		for(auto& v : graph[x]){
			stk.push_back(v);
			dfs(graph,v,n);
			stk.pop_back();
		}
	}
	vector<vector<int>> allPathsSourceTarget(vector<vector<int>>& graph) {
        stk.push_back(0);
        dfs(graph,0,graph.size()-1);
        return ans;
    }
}	
```

二刷
```c++
class Solution {
public:
    vector<int> stk;
    vector<vector<int>> ans;
    vector<vector<int>> v;
    int N;
    void dfs(int n){
        if(n == N-1){
            ans.push_back(stk);
            return;
        }
        for(auto& val: v[n]){
            stk.push_back(val);
            dfs(val);
            stk.pop_back();
        }
    }
    vector<vector<int>> allPathsSourceTarget(vector<vector<int>>& graph) {
        v = graph;
        N = graph.size();
        stk.push_back(0);
        dfs(0);
        return ans;
    }
};
```