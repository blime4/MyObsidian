# 023 - 地址空间和地址生成

地址空间 (address space)；由一些离散地址构成的空间。其中的每个地址对应一个物理或逻辑实体，例如网络主机、外围设备、磁盘扇区、内存单元等。

+ 物理地址空间
	+ 硬件支持的地址空间
	+ 起始地址 0，直到 MAXsys 
+ 逻辑地址空间
	+ 在 CPU 运行的进程看到的地址
	+ 起始地址 0，直到 MAXprog

## 逻辑地址生成

![[Pasted image 20211221174856.png]]

编译--》汇编--》链接--》重定位

## 地址生成时机和限制

+ 编译时
	+ 假设起始地址已知-----》起始地址写死----》如老式功能手机
	+ 如果起始地址改变，必须重新编译
+ 加载时
	+ 如编译时起始位置未知，编译器需生成可重定位的代码（relocatable code）
	+ 加载时，生成绝对地址
+ 执行时 --- 》最灵活
	+ 执行时代码可移动
	+ 需地址转换（映射）硬件支持

## 地址生成的过程

1. CPU执行指令，看到了需要一个地址
2. [[MMU]] 将这个地址，通过[[页表]]，将逻辑地址翻译成物理地址
3. CPU 上的控制器，负责将物理地址和相关的总线控制信号，送到总线上去
4. 存储芯片会识别总线上的物理地址和控制信号
	1. 读，写信号
	2. 处理数据



## 地址检查
![[Pasted image 20211221180013.png]]

逻辑地址--> 段长度和偏移量是否是有效范围 --> 逻辑地址 + 段基址得到物理地址 --> 内存访问


段长度和段基址可以由操作系统用指令控制

 