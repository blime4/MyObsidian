多线程的适用场景是：
提高响应速度，让 IO 和“计算”相互重叠，降低 latency。==虽然多线程不能提高绝对性能，但能提高平均响应性能。==

一个程序要做成多线程的，大致要满足：

  

·有多个CPU可用。单核机器上多线程没有性能优势（但或许能简化并发业务逻辑的实现）。

·线程间有共享数据，即内存中的全局状态。如果没有共享数据，用模型3b就行。虽然我们应该把线程间的共享数据降到最低，但不代表没有。

·共享的数据是可以修改的，而不是静态的常量表。如果数据不能修改，那么可以在进程间用shared memory，模式3就能胜任。

·提供非均质的服务。即，事件的响应有优先级差异，我们可以用专门的线程来处理优先级高的事件。防止[[优先级反转]]。

·latency和throughput同样重要，不是逻辑简单的IO bound或CPU bound程序。换言之，程序要有相当的计算量。

·利用异步操作。比如logging。无论往磁盘写log file，还是往log server发送消息都不应该阻塞critical path。

·能scale up。一个好的多线程程序应该能享受增加CPU数目带来的好处，目前主流是8核，很快就会用到16核的机器了。

·具有可预测的性能。随着负载增加，性能缓慢下降，超过某个临界点之后会急速下降。线程数目一般不随负载变化。

·多线程能有效地划分责任与功能，让每个线程的逻辑比较简单，任务单一，便于编码。而不是把所有逻辑都塞到一个 event loop 里，不同类别的事件之间相互影响。