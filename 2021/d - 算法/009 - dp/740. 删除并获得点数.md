```c++
class Solution {
public:
    int deleteAndEarn(vector<int>& v) {
        int maxVal = 0;
        for(int val : v) maxVal = max(maxVal,val);
        vector<int> dp(maxVal+1, 0);
        for(int val : v) dp[val] += val;
        return rob(dp);
    }
    int rob(vector<int>& v) {
        int n = v.size();
        int first = v[0];
        if (n == 1) return first; 
        int second = max(v[0],v[1]);
        for(int i = 2;i<n;i++){
            int tmp = second;
            second = max(second, first+v[i]);
            first = tmp;
        }
        return second;
    }
};

```