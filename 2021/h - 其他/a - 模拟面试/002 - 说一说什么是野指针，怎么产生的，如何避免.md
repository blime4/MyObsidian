# 002 - 说一说什么是野指针，怎么产生的，如何避免
【得分点】

未知内存、未初始化、置为nullptr

【参考答案】

标准回答

1. 什么是野指针

野指针是指指向的位置是随机的、不可知的、不正确的。

2. 野指针产生的原因

a. 指针变量未初始化或者随便赋值：指针变量没有初始化，其值是随机的，也就是指针变量指向的是不确定的内存，如果对它解除引用，结果是不可知的。

b. 指针释放后未置空：有时候指针在释放后没有复制为 nullptr，虽然指针变量指向的内存被释放掉了，但是指针变量中的值还在，这时指针变量就是指向一个未知的内存，如果对它解除引用，结果是不可知的。

c. 指针操作超出了变量的作用域：函数中返回了局部变量的地址或者引用，因为局部变量出了作用域就释放了，这时候返回的地址指向的内存也是未知的。

3. 如何避免野指针

a. 指针变量一定要初始化，可以初始化为 nullptr，因为 nullptr 明确表示空指针，对 nullptr 操作也不会有问题。

b. 释放后置为 nullptr。

【延伸阅读】

野指针产生的具体代码：

> int * p;    // 未初始化，值未知
> 
> *p = 1000;    
> 
> int * p1 = (int *)0x1234;    // 指向的内存未知
> 
> *p1 = 2000;
> 
> int * p2 = new int(10);
> 
> delete p2;    // p2指向的内存释放了，但是p2指向的内存你未知
> 
> *p2 = 3000;