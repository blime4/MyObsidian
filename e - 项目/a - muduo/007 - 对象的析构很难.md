


在多线程程序中，存在了太多的[[竞态条件]]。
对一般成员函数而言，做到线程安全的办法是让它们顺次执行，而不要并发执行（关键是不要同时读写共享状态），也就是让每个成员函数的临界区不重叠。这是显而易见的，不过有一个隐含条件或许不是每个人都能立刻想到：
==成员函数用来保护临界区的互斥器本身必须是有效的。==
==而析构函数破坏了这一假设，它会把mutex成员变量销毁掉。悲剧啊！==


