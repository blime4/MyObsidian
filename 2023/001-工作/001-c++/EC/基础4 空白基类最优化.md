
C++中的空白基类最优化（Empty Base Optimization，简称 EBO）是一种优化手段，通过在继承关系中使用空白基类来减小派生类的大小。这种优化利用了 C++标准规定的一些行为，允许派生类共享基类的空间，从而减小派生类的实际大小。

```c++
#include <iostream>

// 空白基类
class EmptyBase {};

// 包含空白基类的派生类
class Derived : public EmptyBase {
public:
    int data;

    Derived(int value) : data(value) {}
};

int main() {
    std::cout << "Size of EmptyBase: " << sizeof(EmptyBase) << std::endl;
    std::cout << "Size of Derived: " << sizeof(Derived) << std::endl;

    Derived derivedObject(42);

    std::cout << "Data in Derived: " << derivedObject.data << std::endl;

    return 0;
}

```

在这个例子中，`EmptyBase` 是一个空白基类，没有任何成员变量。然后，`Derived` 类从 `EmptyBase` 公有继承，同时拥有自己的成员变量 `data`。

关键点是，如果一个类的基类是空的（即没有成员变量），C++标准允许派生类共享基类的空间，而不会为每个派生类实例重复存储空白基类的信息。这样，`EmptyBase` 对象在 `Derived` 类中并不会增加额外的大小。

```bash
Size of EmptyBase: 1
Size of Derived: 4
Data in Derived: 42
```

尽管 `EmptyBase` 的大小是1字节，但由于空白基类最优化，`Derived` 的大小只增加了 `data` 成员的大小，而没有额外的空白基类开销。这种优化在某些情况下对于减小对象的内存占用是很有用的